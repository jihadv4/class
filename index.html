<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class Scheduler Text Formatter</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <img id="siteLogo" src="logo.png" alt="Class Scheduler logo" width="64" height="64" />
                <div style="display:flex; flex-direction:column;">
                    <h1>Class Scheduler</h1>
                    <p>Manage your weekly class schedule with ease</p>
                </div>
            </div>
            <div class="header-actions">
                <button id="settingsBtn" class="btn btn-secondary">
                    Options
                </button>
                <!-- Added format editor button -->
                <button id="formatEditorBtn" class="btn btn-secondary">
                    Format Editor
                </button>
                <button id="copyBtn" class="btn btn-primary">
                    Copy Schedule
                </button>
                    <button id="themeToggleBtn" class="btn btn-secondary" aria-pressed="false" title="Toggle dark mode">
                        <span id="themeIcon">ðŸŒ™</span>
                    </button>
                    <button id="resetBtn" class="btn btn-secondary">
                        Reset to Default
                    </button>
            </div>
        </header>

        <!-- Added settings modal for managing dropdown options -->
        <div id="settingsModal" class="modal" style="display: none;" aria-hidden="true">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Manage Options</h2>
                    <button class="modal-close" id="closeSettingsBtn" aria-label="Close settings dialog">&times;</button>
                </div>
                <div class="modal-body">
                    <!-- Course options -->
                    <div class="options-section">
                        <h3>Courses</h3>
                        <div class="option-input-group">
                            <input type="text" id="newCourseName" placeholder="Enter course name (e.g., Introduction to CS)">
                            <input type="text" id="newCourseCode" placeholder="Enter course code (e.g., CS101)">
                            <button class="btn btn-small" id="addCourseBtn">Add</button>
                        </div>
                        <div id="courseList" class="options-list"></div>
                    </div>

                    <!-- Instructor options -->
                    <div class="options-section">
                        <h3>Instructors</h3>
                        <div class="option-input-group">
                            <input type="text" id="newInstructor" placeholder="Enter instructor name">
                            <button class="btn btn-small" id="addInstructorBtn">Add</button>
                        </div>
                        <div id="instructorList" class="options-list"></div>
                    </div>

                    <!-- Room options -->
                    <div class="options-section">
                        <h3>Rooms</h3>
                        <div class="option-input-group">
                            <input type="text" id="newRoom" placeholder="Enter room number">
                            <button class="btn btn-small" id="addRoomBtn">Add</button>
                        </div>
                        <div id="roomList" class="options-list"></div>
                    </div>

                    <!-- Building options -->
                    <div class="options-section">
                        <h3>Buildings</h3>
                        <div class="option-input-group">
                            <input type="text" id="newBuilding" placeholder="Enter building name">
                            <button class="btn btn-small" id="addBuildingBtn">Add</button>
                        </div>
                        <div id="buildingList" class="options-list"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Added edit option modal -->
        <div id="editOptionModal" class="modal" style="display: none;" aria-hidden="true">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Edit Option</h2>
                    <button class="modal-close" id="closeEditOptionBtn" aria-label="Close edit option dialog">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="editOptionValue">Value</label>
                        <input type="text" id="editOptionValue" placeholder="Enter new value">
                    </div>
                    <div id="editOptionCodeGroup" class="form-group" style="display: none;">
                        <label for="editOptionCode">Code</label>
                        <input type="text" id="editOptionCode" placeholder="Enter new code">
                    </div>
                    <div class="modal-actions">
                        <button class="btn btn-primary" id="saveEditOptionBtn">Save</button>
                        <button class="btn btn-secondary" id="closeEditOptionBtnBottom">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <main class="main-content">
            <div class="tabs" role="tablist" aria-label="Days of week">
                <button class="tab-btn active" data-day="Sunday" role="tab" aria-selected="true" aria-controls="classList">Sunday</button>
                <button class="tab-btn" data-day="Monday" role="tab" aria-selected="false" aria-controls="classList">Monday</button>
                <button class="tab-btn" data-day="Tuesday" role="tab" aria-selected="false" aria-controls="classList">Tuesday</button>
                <button class="tab-btn" data-day="Wednesday" role="tab" aria-selected="false" aria-controls="classList">Wednesday</button>
                <button class="tab-btn" data-day="Thursday" role="tab" aria-selected="false" aria-controls="classList">Thursday</button>
                <button class="tab-btn" data-day="Friday" role="tab" aria-selected="false" aria-controls="classList">Friday</button>
                <button class="tab-btn" data-day="Saturday" role="tab" aria-selected="false" aria-controls="classList">Saturday</button>
            </div>

            <div class="content-area">
                <div class="form-section">
                    <h2 id="formTitle">Add Class</h2>
                    <form id="classForm">
                        <div class="form-group">
                            <label for="course">Course</label>
                            <select id="course" required>
                                <option value="">Select a course...</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="courseCode">Course Code</label>
                            <select id="courseCode" required>
                                <option value="">Select a course code...</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="instructor">Instructor</label>
                            <select id="instructor" required>
                                <option value="">Select an instructor...</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="room">Room</label>
                            <select id="room" required>
                                <option value="">Select a room...</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="building">Building</label>
                            <select id="building" required>
                                <option value="">Select a building...</option>
                            </select>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="startTime">Start Time</label>
                                <input type="time" id="startTime" required>
                            </div>
                            <div class="form-group">
                                <label for="endTime">End Time</label>
                                <input type="time" id="endTime" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="date">Date (Optional)</label>
                            <input type="date" id="date" aria-describedby="dateError">
                            <div id="dateError" class="form-error" role="status" aria-live="polite" style="display:none; color: #b91c1c; font-size: 13px; margin-top: 6px;"></div>
                            <button type="button" id="fixDateBtn" class="btn btn-small" style="display:none; margin-top:6px;">Set date to selected day</button>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="tempOnly">
                                <span>Temporary (Today Only)</span>
                            </label>
                        </div>

                        <input type="hidden" id="editingId">
                        <div id="formError" class="form-error" role="alert" aria-live="assertive" style="display:none; color: #b91c1c; margin-bottom: 8px;"></div>

                        <button type="submit" class="btn btn-primary" id="submitBtn">Add Class</button>
                        <button type="button" class="btn btn-secondary" id="cancelBtn" style="display: none;">Cancel</button>
                    </form>
                </div>

                <div class="schedule-section">
                    <h2 id="dayTitle">Sunday</h2>
                    <div id="legend" class="legend" aria-hidden="false" style="margin-bottom: 12px; display:none;"></div>
                    <div id="classList" class="class-list" aria-live="polite">
                        <div class="empty-message">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                <path d="M3 7h18" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <rect x="3" y="7" width="18" height="13" rx="2" stroke="#94a3b8" stroke-width="2"/>
                                <path d="M7 11v-2" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M17 11v-2" stroke="#94a3b8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <div style="margin-left: 12px;">
                                <strong>No classes scheduled</strong>
                                <div style="color: var(--text-light);">Add a class using the form to get started.</div>
                                <button id="addClassCta" class="btn btn-primary btn-small" style="margin-top:8px;">Add a Class</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Added modal for editing formatted text -->
        <div id="textEditorModal" class="modal" style="display: none;" aria-hidden="true">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h2>Edit Schedule Text</h2>
                    <button class="modal-close" id="closeTextEditorBtn" aria-label="Close text editor dialog">&times;</button>
                </div>
                <div class="modal-body">
                    <textarea id="scheduleText" class="schedule-textarea" placeholder="Schedule text will appear here..."></textarea>
                    <div class="modal-actions">
                        <button class="btn btn-primary" id="copyTextBtn">Copy to Clipboard</button>
                        <button class="btn btn-secondary" id="saveFormatBtn">Save as Default Format</button>
                        <button class="btn btn-secondary" id="closeTextEditorBtnBottom">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Updated format editor to use separate day header and class line templates -->
        <div id="formatEditorModal" class="modal" style="display: none;" aria-hidden="true">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h2>Edit Schedule Format</h2>
                    <button class="modal-close" id="closeFormatEditorBtn" aria-label="Close format editor dialog">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="format-editor-container">
                        <div class="format-editor-main">
                            <h3>Day Header Template</h3>
                            <p class="format-help">This appears once per day at the top. Use {day} and {date} variables.</p>
                            <textarea id="formatDayHeader" class="format-textarea" placeholder="Enter day header template..."></textarea>
                            
                            <h3 style="margin-top: 20px;">Class Line Template</h3>
                            <p class="format-help">This repeats for each class in the day. Use class-specific variables.</p>
                            <textarea id="formatClassLine" class="format-textarea" placeholder="Enter class line template..."></textarea>
                            
                            <div class="format-preview">
                                <h4>Preview (Multiple Classes):</h4>
                                <div id="formatPreview" class="preview-content"></div>
                            </div>
                        </div>
                        <div class="format-editor-sidebar">
                            <h3>Available Variables</h3>
                            <div class="variables-list">
                                <div style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #ddd;">
                                    <strong style="display: block; margin-bottom: 8px;">Day Header Variables:</strong>
                                    <div class="variable-item">
                                        <code>{day}</code>
                                        <span>Day name (e.g., Monday)</span>
                                    </div>
                                    <div class="variable-item">
                                        <code>{date}</code>
                                        <span>Full date (e.g., Monday, October 27, 2025)</span>
                                    </div>
                                </div>
                                <div>
                                    <strong style="display: block; margin-bottom: 8px;">Class Line Variables:</strong>
                                    <div class="variable-item">
                                        <code>{courseCode}</code>
                                        <span>Course code (e.g., AMAT2101)</span>
                                    </div>
                                    <div class="variable-item">
                                        <code>{courseName}</code>
                                        <span>Course name (e.g., Advanced Mathematics)</span>
                                    </div>
                                    <div class="variable-item">
                                        <code>{instructor}</code>
                                        <span>Instructor name</span>
                                    </div>
                                    <div class="variable-item">
                                        <code>{room}</code>
                                        <span>Room number</span>
                                    </div>
                                    <div class="variable-item">
                                        <code>{building}</code>
                                        <span>Building name</span>
                                    </div>
                                    <div class="variable-item">
                                        <code>{startTime}</code>
                                        <span>Class start time</span>
                                    </div>
                                    <div class="variable-item">
                                        <code>{endTime}</code>
                                        <span>Class end time</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button class="btn btn-primary" id="saveFormatTemplateBtn">Save Format</button>
                        <button class="btn btn-secondary" id="resetFormatBtn">Reset to Default</button>
                        <button class="btn btn-secondary" id="closeFormatEditorBtnBottom">Close</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
        <footer class="site-footer" role="contentinfo" aria-label="Site footer">
            <div class="footer-inner container">
                <div class="footer-left">Â© <span id="footerYear"></span> Class Scheduler</div>
                <div class="footer-right">Made by <a href="#" id="footerCredit">CJ</a></div>
            </div>
        </footer>

        <script src="config.js"></script>
        <script src="script.js"></script>
</body>
</html>
